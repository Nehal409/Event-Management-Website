<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Billing Details</title>

		<link
			rel="stylesheet"
			href="https://unpkg.com/swiper/swiper-bundle.min.css"
		/>

		<!-- font awesome cdn link  -->
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
		/>
		<script src="https://unpkg.com/axios@1.1.2/dist/axios.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.0/jquery.min.js"></script>

		<!-- custom css file link  -->
		<link rel="stylesheet" href="../css/billingDetails.css" />
	</head>
	<body>
		<!-- header section starts  -->

		<header class="header">
			<a href="index.html" class="logo"
				><div class="logos">
					<img src="../images/Untitled design.png" alt="" /></div
			></a>
			<nav class="navbar">
				<a href="index.html">home</a>
				<a href="index.html">services</a>
				<a href="index.html">about</a>
				<a href="index.html">contact</a>
				<a href="login.html">login</a>
			</nav>
			<div class="icons">
				<i class="fas fa-search" id="search-btn"></i>
			</div>

			<form action="" class="search-bar-container">
				<input type="search" id="search-bar" placeholder="search here..." />
				<label for="search-bar" id="search" class="fas fa-search"></label>
			</form>

			<div id="menu-bars" class="fas fa-bars"></div>
		</header>

		<!-- header section ends -->

		<!-- home section starts  -->

		<section class="home" id="home">
			<div class="content">
				<h3>Billing <span>Details</span></h3>
			</div>
		</section>

		<!-- home section ends -->

		<div class="container">
			<form action="" id="form">
				<div class="row">
					<div class="col">
						<div class="inputBox">
							<span>full name :</span>
							<input type="text" id="name" required placeholder="Ali Ahmed" />
						</div>
						<div class="inputBox">
							<span>email :</span>
							<input
								type="email"
								id="email"
								required
								placeholder="example@example.com"
							/>
						</div>
						<div class="inputBox">
							<span>address :</span>
							<input
								type="text"
								placeholder="house number - street - locality"
								id="address"
								required
							/>
						</div>
						<div class="inputBox">
							<span>phone :</span>
							<input
								type="tel"
								id="phone"
								required
								placeholder="1111-1111-111"
							/>
						</div>

						<div class="flex">
							<div class="inputBox">
								<span>city :</span>
								<input type="text" placeholder="Karachi" id="city" required />
							</div>
							<div class="inputBox">
								<span>CNIC:</span>
								<input
									type="text"
									placeholder="42101-1111111-1"
									id="cnic"
									required
								/>
							</div>
						</div>
					</div>
				</div>

				<div class="radios">
					<div class="payment">Payment Options</div>
					<div class="top-radio">
						<div class="radio-wrap">
							<input
								type="radio"
								id="radio1"
								value="bank"
								name="radio1"
								class="text-center"
								onchange="onRadioChange(event)"
							/>
							<label for="radio1">Bank</label>
						</div>
						<div class="radio-wrap">
							<input
								type="radio"
								id="radio2"
								value="card"
								name="radio1"
								class="text-center"
								onchange="onRadioChange(event)"
							/>
							<label for="radio2">Card</label>
						</div>
						<div class="radio-wrap">
							<input
								type="radio"
								id="radio3"
								value="easypaisa"
								name="radio1"
								class="text-center"
								onchange="onRadioChange(event)"
							/>
							<label for="radio3">Easypaisa</label>
						</div>
						<div class="radio-wrap">
							<input
								type="radio"
								id="radio4"
								value="jazzcash"
								name="radio1"
								class="text-center"
								onchange="onRadioChange(event)"
							/>
							<label for="radio4">JazzCash</label>
						</div>
					</div>
				</div>
				<!-- Only for representation -->
				<!-- <a href="cardPayment.html">
					<input
						type="submit"
						id="btn"
						value="proceed to payment"
						class="submit-btn"
					/>
				</a> -->

				<!-- Use during backend integration -->
				<input type="submit" value="proceed to booking" class="submit-btn" />
			</form>
		</div>
		<!-- footer section starts  -->

		<section class="footer">
			<div class="box-container">
				<div class="box">
					<h3>follow us</h3>
					<a href="#"> <i class="fab fa-facebook-f"></i> facebook </a>
					<a href="#"> <i class="fab fa-twitter"></i> twitter </a>
					<a href="#"> <i class="fab fa-instagram"></i> instagram </a>
					<a href="#"> <i class="fab fa-linkedin"></i> linkedin </a>
				</div>

				<div class="box">
					<h3>quick links</h3>
					<a href="#service"> <i class="fas fa-arrow-right"></i> services </a>
					<a href="#about"> <i class="fas fa-arrow-right"></i> about </a>
					<a href="login.html"> <i class="fas fa-arrow-right"></i> login </a>
					<a href="#contact"> <i class="fas fa-arrow-right"></i> contact </a>
				</div>

				<div class="box">
					<h3>contact info</h3>
					<a href="#"> <i class="fas fa-phone"></i> +111-222-333 </a>
					<a href="#">
						<i class="fas fa-envelope"></i> suhailnarejo12@gmail.com
					</a>
					<a href="#">
						<i class="fas fa-envelope"></i> alimurtuza222@gmail.com
					</a>
					<a href="#">
						<i class="fas fa-map-marker-alt"></i> Karachi, Pakistan</a
					>
				</div>
			</div>
		</section>

		<!-- footer section ends -->

		<script>
			const form = document.getElementById("form");
			form.addEventListener("submit", async function (e) {
				e.preventDefault();

				const name = document.getElementById("name").value;
				const email = document.getElementById("email").value;
				const address = document.getElementById("address").value;
				const phone = document.getElementById("phone").value;
				const city = document.getElementById("city").value;
				const cnic = document.getElementById("cnic").value;

				try {
					const res = await axios
						.post("http://localhost:3000/billing", {
							name: name,
							email: email,
							address: address,
							phone: phone,
							city: city,
							cnicNumber: cnic,
						})
						.then(response => {
							// console.log(response.data.id);
							if (window.radio === "card") {
								window.location.href = "cardPayment.html";
							} else {
								window.location.href = "confirmBooking.html";
							}
							// log.textContent = response.data.message;

							form.reset();
						});
				} catch (error) {
					console.log(error.response.data.message);
				}
			});

			function onRadioChange(event) {
				window.radio = event.target.value;
				// save the value of radio button in localstorage
				localStorage.setItem("paymentMethod", window.radio);
				console.log(window.radio);
			}

			// let userInfo = [];

			// async function postData() {
			// 	let details = {
			// 		name: document.getElementById("name").value,
			// 		email: document.getElementById("email").value,
			// 		address: document.getElementById("address").value,
			// 		phone: document.getElementById("phone").value,
			// 		city: document.getElementById("city").value,
			// 		cnic: document.getElementById("cnic").value,
			// 	};
			// 	userInfo.push(details);
			// 	//saving to localStorage
			// 	localStorage.setItem("UserBillingInfo", JSON.stringify(userInfo));
			// }
		</script>

		<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

		<!-- custom js file link  -->
		<script src="../js/script.js"></script>
	</body>
</html>
